# Chunked Streaming Example

This simple example demonstrates reading a stream of bytes from STDIN and segmenting the input data, uploading to each segment in a chunked fashion. This is meant to be similar to the behavior of chunked media streaming such as low latency CMAF where segments are further divided into chunks for each frame.
It uses 2 clients, a POST and GET client. The POST client reads bytes from STDIN generated by ./input_stream one chunk at a time. When the segment delimeter `$` is seen, a new http POST request is created for a new segment, and the chunks read in are written to the request until the next delimeter. The GET client opens a GET request to the chunked-streaming-server for each numbered segment, logging chunks to STDOUT as they are recieved.


In one terminal session, start the chunked-streaming-server
```
~/go-chunked-streaming-server $ go run main.go
```

Open a second terminal session and start the GET client.
```
~/go-chunked-streaming-server $ go run examples/chunked-streaming/get_client/main.go
```

Open a second terminal session and start the POST client.
```
# first build the input_stream and post_client binaries so we can pipe data
~/go-chunked-streaming-server $ make build-example-chunked-streaming
~/go-chunked-streaming-server $ bin/examples-chunked-streaming-input-stream | bin/examples-chunked-streaming-post-client
```

In the second terminal session running the GET client, you should see it log out the segment chunks as it receives them.
